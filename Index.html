<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡∏ß‡∏¢ - ‡∏á‡∏ß‡∏î 16 ‡∏ò.‡∏Ñ. 68</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body { background-color: #f0f2f5; font-family: 'Sarabun', sans-serif; padding-bottom: 50px; }
        .container { max-width: 600px; margin: 0 auto; }
        
        /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ */
        .stat-card {
            background: white; border-radius: 15px; padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); text-align: center;
        }
        .stat-value { font-size: 1.5rem; font-weight: bold; }
        
        /* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ß‡∏¢ */
        .ticket-item {
            background: white; border-radius: 12px; margin-bottom: 10px; padding: 15px;
            border-left: 6px solid #e9ecef; box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: all 0.2s;
        }
        
        /* ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡πà‡∏≤‡∏á‡πÜ */
        .ticket-item.status-free { border-left-color: #ced4da; }
        .ticket-item.status-pending { border-left-color: #ffc107; background-color: #fffbf0; }
        .ticket-item.status-paid { border-left-color: #198754; background-color: #f0f9f4; }

        .lotto-num { font-size: 1.6rem; font-weight: 800; color: #333; letter-spacing: 2px; }
        .badge-status { float: right; }
    </style>
</head>
<body>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-bold m-0"><i class="fas fa-money-bill-wave text-success"></i> ‡πÅ‡∏ú‡∏á‡∏´‡∏ß‡∏¢‡πÄ‡∏Æ‡∏µ‡∏¢/‡πÄ‡∏à‡πä</h4>
        <button onclick="clearData()" class="btn btn-sm btn-light text-danger">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>

    <div class="row g-2 mb-3">
        <div class="col-6">
            <div class="stat-card">
                <div class="text-muted small">‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏ö)</div>
                <div class="stat-value text-primary" id="soldCount">0</div>
            </div>
        </div>
        <div class="col-6">
            <div class="stat-card">
                <div class="text-muted small">‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏ö‡∏≤‡∏ó)</div>
                <div class="stat-value text-success" id="moneyCount">0</div>
            </div>
        </div>
        <div class="col-12">
            <div id="alertPending" class="alert alert-warning d-none d-flex justify-content-between align-items-center py-2">
                <span><i class="fas fa-clock"></i> ‡∏£‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô:</span>
                <strong id="pendingCount">0 ‡∏ö‡∏≤‡∏ó</strong>
            </div>
        </div>
    </div>

    <input type="tel" id="searchInput" class="form-control form-control-lg mb-3 shadow-sm" 
           placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡∏ó‡πâ‡∏≤‡∏¢..." onkeyup="renderList()">

    <div id="lottoList"></div>
</div>

<script>
    // 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ß‡∏¢ 40 ‡∏ä‡∏∏‡∏î ‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    const rawData = [
        "619404","715609","902323","447630","089036","199640","851042","496443","381845","736346",
        "909147","554548","084151","967252","578353","612653","100554","265655","000757","013660",
        "133961","272663","401664","033465","582067","463668","368774","370075","285776","599780",
        "139081","711982","979686","409089","783090","910390","778191","371692","322493","284899"
    ];

    let tickets = [];

    // 2. ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
    function init() {
        const saved = localStorage.getItem('myLottoShop');
        if (saved) {
            tickets = JSON.parse(saved);
        } else {
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
            tickets = rawData.map(num => ({
                number: num,
                price: 200, // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏ä‡∏∏‡∏î (‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ)
                customer: "",
                isPaid: false
            }));
        }
        renderList();
    }

    // 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
    function renderList() {
        const search = document.getElementById('searchInput').value;
        const listDiv = document.getElementById('lottoList');
        listDiv.innerHTML = '';

        let sold = 0, money = 0, pending = 0;

        tickets.forEach((t, index) => {
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î
            if (t.customer) {
                sold++;
                if (t.isPaid) money += t.price;
                else pending += t.price;
            }

            // ‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            if (!t.number.includes(search)) return;

            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            let statusClass = 'status-free';
            let statusBadge = '<span class="badge bg-secondary">‡∏ß‡πà‡∏≤‡∏á</span>';
            
            if (t.customer) {
                if (t.isPaid) {
                    statusClass = 'status-paid';
                    statusBadge = '<span class="badge bg-success">‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</span>';
                } else {
                    statusClass = 'status-pending';
                    statusBadge = '<span class="badge bg-warning text-dark">‡∏£‡∏≠‡πÇ‡∏≠‡∏ô</span>';
                }
            }

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML
            const html = `
                <div class="ticket-item ${statusClass}">
                    <div class="d-flex justify-content-between mb-2">
                        <span class="lotto-num text-primary">${t.number}</span>
                        ${statusBadge}
                    </div>
                    <div class="row g-2">
                        <div class="col-8">
                            <input type="text" class="form-control form-control-sm" 
                                   placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." 
                                   value="${t.customer}" 
                                   onchange="updateCustomer(${index}, this.value)">
                        </div>
                        <div class="col-4">
                            <button class="btn btn-sm w-100 ${t.isPaid ? 'btn-success' : 'btn-outline-secondary'}" 
                                    onclick="togglePaid(${index})" 
                                    ${!t.customer ? 'disabled' : ''}>
                                ${t.isPaid ? '<i class="fas fa-check"></i> ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß' : '‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô'}
                            </button>
                        </div>
                    </div>
                </div>
            `;
            listDiv.innerHTML += html;
        });

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°
        document.getElementById('soldCount').innerText = sold + "/40";
        document.getElementById('moneyCount').innerText = money.toLocaleString();
        
        const alertPending = document.getElementById('alertPending');
        if (pending > 0) {
            alertPending.classList.remove('d-none');
            document.getElementById('pendingCount').innerText = pending.toLocaleString();
        } else {
            alertPending.classList.add('d-none');
        }
    }

    // 4. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
    function updateCustomer(index, name) {
        tickets[index].customer = name;
        if (!name) tickets[index].isPaid = false; // ‡∏•‡∏ö‡∏ä‡∏∑‡πà‡∏≠ = ‡∏•‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡πà‡∏≤‡∏¢
        save();
    }

    // 5. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô
    function togglePaid(index) {
        tickets[index].isPaid = !tickets[index].isPaid;
        save();
    }

    // 6. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
    function save() {
        localStorage.setItem('myLottoShop', JSON.stringify(tickets));
        renderList(); // ‡∏ß‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡∏°‡πà
    }

    // 7. ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    function clearData() {
        if(confirm("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) {
            localStorage.removeItem('myLottoShop');
            init();
        }
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
    init();
</script>

</body>
</html>
