<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡∏ß‡∏¢ - ‡∏á‡∏ß‡∏î 1 ‡∏Å.‡∏û. 69</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body { background-color: #f0f2f5; font-family: 'Sarabun', sans-serif; padding-bottom: 80px; }
        .container { max-width: 600px; margin: 0 auto; }
        .stat-card {
            background: white; border-radius: 15px; padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); text-align: center;
        }
        .stat-value { font-size: 1.5rem; font-weight: bold; }
        .ticket-item {
            background: white; border-radius: 12px; margin-bottom: 10px; padding: 15px;
            border-left: 6px solid #e9ecef; box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .status-free { border-left-color: #ced4da; }
        .status-pending { border-left-color: #ffc107; background-color: #fffbf0; }
        .status-paid { border-left-color: #198754; background-color: #f0f9f4; }
        .lotto-num { font-size: 1.6rem; font-weight: 800; color: #333; letter-spacing: 2px; }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå Modal ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î */
        #summaryText { white-space: pre-wrap; font-family: 'Courier New', Courier, monospace; background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 0.9rem; }
    </style>
</head>
<body>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-bold m-0 text-dark"><i class="fas fa-store text-primary"></i> ‡πÅ‡∏ú‡∏á‡∏´‡∏ß‡∏¢ (1 ‡∏Å.‡∏û. 69)</h4>
        <div>
            <button onclick="clearData()" class="btn btn-sm btn-outline-danger me-1">‡∏•‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà</button>
            <button class="btn btn-sm btn-dark" onclick="showSummary()"><i class="fas fa-file-alt"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î</button>
        </div>
    </div>

    <div class="row g-2 mb-3">
        <div class="col-6">
            <div class="stat-card">
                <div class="text-muted small">‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏ö)</div>
                <div class="stat-value text-primary" id="soldCount">0</div>
            </div>
        </div>
        <div class="col-6">
            <div class="stat-card">
                <div class="text-muted small">‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏ö‡∏≤‡∏ó)</div>
                <div class="stat-value text-success" id="moneyCount">0</div>
            </div>
        </div>
    </div>

    <input type="tel" id="searchInput" class="form-control form-control-lg mb-3 shadow-sm" 
           placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç..." onkeyup="renderList()">

    <div id="lottoList"></div>
</div>

<div class="modal fade" id="summaryModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title fw-bold">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div id="summaryText"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary w-100" onclick="copySummary()">‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏™‡πà‡∏á LINE</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const rawData = [
  // ‡πÅ‡∏ú‡∏á‡∏ã‡πâ‡∏≤‡∏¢
  "078404", "960808", "066110", "005812", "845214",
  "282316", "354518", "523420", "284422", "090924",
  "885326", "971828", "360232", "387534", "855546",
  "575148", "713950", "622952", "531954", "938556",
  "169558",

  // ‡πÅ‡∏ú‡∏á‡∏Ç‡∏ß‡∏≤
  "209360", "281662", "353964", "378268", "300070",
  "442872", "585674", "037376", "888578", "717880",
  "925082", "867884", "440386", "334388", "338790",
  "908092", "522594", "285096", "194198"
];

    let tickets = [];

    function init() {
        const saved = localStorage.getItem('myLottoShop');
        if (saved) {
            tickets = JSON.parse(saved);
            if (tickets.length !== rawData.length) resetTickets();
        } else {
            resetTickets();
        }
        renderList();
    }

    function resetTickets() {
        tickets = rawData.map(num => ({ number: num, price: 100, customer: "", isPaid: false }));
        save();
    }

    function renderList() {
        const search = document.getElementById('searchInput').value;
        const listDiv = document.getElementById('lottoList');
        listDiv.innerHTML = '';
        let sold = 0, money = 0;

        tickets.forEach((t, index) => {
            if (t.customer) {
                sold++;
                if (t.isPaid) money += t.price;
            }
            if (!t.number.includes(search)) return;

            let statusClass = t.customer ? (t.isPaid ? 'status-paid' : 'status-pending') : 'status-free';
            let statusBadge = t.customer ? (t.isPaid ? '<span class="badge bg-success">‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</span>' : '<span class="badge bg-warning text-dark">‡∏£‡∏≠‡πÇ‡∏≠‡∏ô</span>') : '<span class="badge bg-secondary">‡∏ß‡πà‡∏≤‡∏á</span>';

            listDiv.innerHTML += `
                <div class="ticket-item ${statusClass}">
                    <div class="d-flex justify-content-between mb-2">
                        <span class="lotto-num text-primary">${t.number}</span>
                        ${statusBadge}
                    </div>
                    <div class="row g-2">
                        <div class="col-8"><input type="text" class="form-control form-control-sm" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." value="${t.customer}" onchange="updateCustomer(${index}, this.value)"></div>
                        <div class="col-4"><button class="btn btn-sm w-100 ${t.isPaid ? 'btn-success' : 'btn-outline-secondary'}" onclick="togglePaid(${index})" ${!t.customer ? 'disabled' : ''}>${t.isPaid ? '‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß' : '‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô'}</button></div>
                    </div>
                </div>`;
        });
        document.getElementById('soldCount').innerText = sold + "/40";
        document.getElementById('moneyCount').innerText = money.toLocaleString();
    }

    function updateCustomer(i, v) { tickets[i].customer = v; if (!v) tickets[i].isPaid = false; save(); }
    function togglePaid(i) { tickets[i].isPaid = !tickets[i].isPaid; save(); }
    function save() { localStorage.setItem('myLottoShop', JSON.stringify(tickets)); renderList(); }
    function clearData() { if(confirm("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) resetTickets(); }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î
    function showSummary() {
        let soldItems = tickets.filter(t => t.customer);
        let paidItems = soldItems.filter(t => t.isPaid);
        let pendingItems = soldItems.filter(t => !t.isPaid);
        
        let txt = `üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ ‡∏á‡∏ß‡∏î 1 ‡∏Å.‡∏û. 69\n`;
        txt += `--------------------------\n`;
        txt += `‚úÖ ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß: ${soldItems.length} ‡πÉ‡∏ö\n`;
        txt += `üí∞ ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß: ${paidItems.length * 100} ‡∏ö‡∏≤‡∏ó\n`;
        txt += `‚è≥ ‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢: ${pendingItems.length * 100} ‡∏ö‡∏≤‡∏ó\n`;
        txt += `--------------------------\n\n`;
        
        if(pendingItems.length > 0) {
            txt += `üìå ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢:\n`;
            pendingItems.forEach(item => txt += `- ${item.number} (${item.customer})\n`);
            txt += `\n`;
        }

        txt += `‚úÖ ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß:\n`;
        paidItems.forEach(item => txt += `- ${item.number} (${item.customer})\n`);

        document.getElementById('summaryText').innerText = txt;
        new bootstrap.Modal(document.getElementById('summaryModal')).show();
    }

    function copySummary() {
        const text = document.getElementById('summaryText').innerText;
        navigator.clipboard.writeText(text).then(() => alert("‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!"));
    }

    init();
</script>
</body>
</html>
