<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡∏ß‡∏¢ - ‡∏á‡∏ß‡∏î 2 ‡∏°.‡∏Ñ. 69</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600&display=swap" rel="stylesheet">

<style>
body { background:#f0f2f5; font-family:'Sarabun',sans-serif; padding-bottom:80px; }
.container { max-width:600px; }
.stat-card { background:#fff;border-radius:15px;padding:15px;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,.05);}
.stat-value { font-size:1.5rem;font-weight:bold; }
.ticket-item { background:#fff;border-radius:12px;padding:15px;margin-bottom:10px;border-left:6px solid #dee2e6;box-shadow:0 1px 3px rgba(0,0,0,.05);}
.status-free { border-left-color:#adb5bd; }
.status-pending { border-left-color:#ffc107;background:#fffbf0; }
.status-paid { border-left-color:#198754;background:#f0f9f4; }
.lotto-num { font-size:1.6rem;font-weight:800;letter-spacing:2px; }
pre { white-space:pre-wrap; }
</style>
</head>

<body>
<div class="container mt-4">

<div class="d-flex justify-content-between align-items-center mb-3">
<h4 class="fw-bold m-0"><i class="fas fa-store text-primary"></i> ‡πÅ‡∏ú‡∏á‡∏´‡∏ß‡∏¢ (2 ‡∏°.‡∏Ñ. 69)</h4>
<div>
<button class="btn btn-sm btn-outline-danger me-1" onclick="clearData()">‡∏•‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà</button>
<button class="btn btn-sm btn-dark me-1" onclick="showSummary()">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î</button>
<button class="btn btn-sm btn-primary" onclick="showPersonSummary()">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</button>
</div>
</div>

<div class="row g-2 mb-3">
<div class="col-6">
<div class="stat-card">
<div class="text-muted small">‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏ö)</div>
<div class="stat-value text-primary" id="soldCount">0</div>
</div>
</div>
<div class="col-6">
<div class="stat-card">
<div class="text-muted small">‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏ö‡∏≤‡∏ó)</div>
<div class="stat-value text-success" id="moneyCount">0</div>
</div>
</div>
</div>

<input type="tel" id="searchInput" class="form-control form-control-lg mb-3"
placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç..." onkeyup="renderList()">

<div id="lottoList"></div>
</div>

<!-- SUMMARY MODAL -->
<div class="modal fade" id="summaryModal" tabindex="-1">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title fw-bold">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<pre id="summaryText"></pre>
</div>
<div class="modal-footer">
<button class="btn btn-primary w-100" onclick="copyText('summaryText')">‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏™‡πà‡∏á LINE</button>
</div>
</div>
</div>
</div>

<!-- PERSON MODAL -->
<div class="modal fade" id="personModal" tabindex="-1">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title fw-bold">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢)</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<select id="personSelect" class="form-select mb-2" onchange="renderPersonSummary()"></select>
<pre id="personSummaryText" class="bg-light p-3 rounded"></pre>
</div>
<div class="modal-footer">
<button class="btn btn-success w-100" onclick="copyText('personSummaryText')">‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏™‡πà‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
const PRICE = 200;

const BANK_INFO =
`üè¶ ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô
‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ 020-1-25404-630
‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‡∏ô‡∏±‡∏ô‡∏ó‡πå‡∏†‡∏™‡∏£ ‡∏Ç‡∏≠‡∏ö‡∏£‡∏π‡∏õ`;

const rawData = [
"334309","794712","109713","731015","413020","154530","622531","491731","796536","883137",
"293137","362538","757938","052940","232545","104246","651047","959548","123549","995350",
"083251","730254","570654","640255","592056","435257","852557","068760","489061","302363",
"404466","201367","261368","837570","851173","650674","785975","995483","226390","652690"
];

let tickets = [];

function init(){
const saved = localStorage.getItem('lotto69');
if(saved){
tickets = JSON.parse(saved);
} else {
tickets = rawData.map(n => ({number:n, customer:"", isPaid:false}));
save();
}
renderList();
}

function save(){
localStorage.setItem('lotto69', JSON.stringify(tickets));
renderList();
}

function renderList(){
let sold=0, money=0;
const search = searchInput.value;
lottoList.innerHTML="";

tickets.forEach((t,i)=>{
if(t.customer){
sold++;
if(t.isPaid) money+=PRICE;
}
if(!t.number.includes(search)) return;

let cls = t.customer ? (t.isPaid?'status-paid':'status-pending') : 'status-free';

lottoList.innerHTML += `
<div class="ticket-item ${cls}">
<div class="d-flex justify-content-between mb-2">
<span class="lotto-num text-primary">${t.number}</span>
<span class="badge ${t.customer?(t.isPaid?'bg-success':'bg-warning text-dark'):'bg-secondary'}">
${t.customer?(t.isPaid?'‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß':'‡∏£‡∏≠‡πÇ‡∏≠‡∏ô'):'‡∏ß‡πà‡∏≤‡∏á'}
</span>
</div>
<div class="row g-2">
<div class="col-8">
<input class="form-control form-control-sm" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"
value="${t.customer}" onchange="tickets[${i}].customer=this.value; if(!this.value) tickets[${i}].isPaid=false; save();">
</div>
<div class="col-4">
<button class="btn btn-sm w-100 ${t.isPaid?'btn-success':'btn-outline-secondary'}"
onclick="tickets[${i}].isPaid=!tickets[${i}].isPaid; save();"
${!t.customer?'disabled':''}>
${t.isPaid?'‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß':'‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô'}
</button>
</div>
</div>
</div>`;
});

soldCount.innerText = sold + "/40";
moneyCount.innerText = money.toLocaleString();
}

function clearData(){
if(confirm("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")){
localStorage.removeItem('lotto69');
init();
}
}

// SUMMARY
function showSummary(){
let sold = tickets.filter(t=>t.customer);
let paid = sold.filter(t=>t.isPaid);
let pending = sold.filter(t=>!t.isPaid);

let txt =
`üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î ‡∏á‡∏ß‡∏î 2 ‡∏°.‡∏Ñ. 69
------------------------
‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß ${sold.length} ‡πÉ‡∏ö
‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß ${paid.length*PRICE} ‡∏ö‡∏≤‡∏ó
‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢ ${pending.length*PRICE} ‡∏ö‡∏≤‡∏ó

üìå ‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢:
${pending.map(p=>`- ${p.number} (${p.customer})`).join('\n')}

‚úÖ ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß:
${paid.map(p=>`- ${p.number} (${p.customer})`).join('\n')}
`;

summaryText.innerText = txt;
new bootstrap.Modal(summaryModal).show();
}

// PERSON SUMMARY
function showPersonSummary(){
const names = [...new Set(tickets.filter(t=>t.customer&&!t.isPaid).map(t=>t.customer))];
personSelect.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ --</option>';
names.forEach(n=>personSelect.innerHTML+=`<option>${n}</option>`);
personSummaryText.innerText="";
new bootstrap.Modal(personModal).show();
}

function renderPersonSummary(){
const name = personSelect.value;
if(!name) return;
const items = tickets.filter(t=>t.customer===name&&!t.isPaid);
let txt =
`üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏∏‡∏ì ${name}
--------------------
‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠:
${items.map(i=>`- ${i.number}`).join('\n')}

üí∞ ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏≠‡∏ô ${items.length*PRICE} ‡∏ö‡∏≤‡∏ó
--------------------
${BANK_INFO}`;

personSummaryText.innerText = txt;
}

function copyText(id){
navigator.clipboard.writeText(document.getElementById(id).innerText)
.then(()=>alert("‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"));
}

init();
</script>
</body>
</html>
